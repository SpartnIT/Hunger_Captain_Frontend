{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Davian\\\\Desktop\\\\techis-wd-forum-django-react\\\\frontend\\\\src\\\\containers\\\\Home.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Loading from '../assets/img/loading.gif';\nimport postImage from '../assets/img/newspaper-icon-png.jpg';\nimport PostForm from '../components/Posts/PostForm';\nimport Post from '../components/Posts/Post';\nimport { fetchPosts } from '../reducks/posts/operations';\nimport { getPosts } from '../reducks/posts/selectors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const selector = useSelector(state => state);\n  const posts = getPosts(selector);\n  let [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    dispatch(fetchPosts({\n      page\n    })); // eslint-disable-next-line\n  }, []); // Infinite Scroll Pagination Flow\n\n  const observer = useRef(); // Reference to a very last post element\n\n  const lastPostElement = useCallback(node => {\n    if (isLoading) return; // Disconnect reference from previous element, so that new last element is hook up correctly\n\n    if (observer.current) {\n      observer.current.disconnect();\n    } // Observe changes in the intersection of target element\n\n\n    observer.current = new IntersectionObserver(async entries => {\n      // That means that we are on the page somewhere, In our case last element of the page\n      if (entries[0].isIntersecting && posts.next) {\n        // Proceed fetch new page\n        setIsLoading(true);\n        setPage(++page);\n        await dispatch(fetchPosts({\n          page\n        }));\n        setIsLoading(false);\n      }\n    }); // Reconnect back with the new last post element\n\n    if (node) {\n      observer.current.observe(node);\n    }\n  }, // eslint-disable-next-line\n  [posts.next]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"content\",\n    children: [/*#__PURE__*/_jsxDEV(PostForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"posts\",\n      children: [posts.results.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: posts.results.map((post, index) => {\n          return /*#__PURE__*/_jsxDEV(Post, {\n            ref: index === posts.results.length - 1 ? lastPostElement : null,\n            post: post\n          }, post.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-post\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          width: \"72\",\n          src: postImage,\n          alt: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No posts here yet...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: Loading,\n          className: \"\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Home, \"tf63ety61+BXkOMtutks0bOWBUA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","useDispatch","useSelector","Loading","postImage","PostForm","Post","fetchPosts","getPosts","Home","dispatch","selector","state","posts","page","setPage","isLoading","setIsLoading","observer","lastPostElement","node","current","disconnect","IntersectionObserver","entries","isIntersecting","next","observe","results","length","map","post","index","id"],"sources":["C:/Users/Davian/Desktop/techis-wd-forum-django-react/frontend/src/containers/Home.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Loading from '../assets/img/loading.gif';\r\nimport postImage from '../assets/img/newspaper-icon-png.jpg';\r\nimport PostForm from '../components/Posts/PostForm';\r\nimport Post from '../components/Posts/Post';\r\nimport { fetchPosts } from '../reducks/posts/operations';\r\nimport { getPosts } from '../reducks/posts/selectors';\r\n\r\nconst Home = () => {\r\n    const dispatch = useDispatch();\r\n    const selector = useSelector(state => state);\r\n    const posts = getPosts(selector);\r\n    let [page, setPage] = useState(1);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        dispatch(fetchPosts({ page }));\r\n        // eslint-disable-next-line\r\n    }, []);\r\n\r\n    // Infinite Scroll Pagination Flow\r\n    const observer = useRef();\r\n\r\n    // Reference to a very last post element\r\n    const lastPostElement = useCallback(\r\n        node => {\r\n            if (isLoading) return;\r\n            // Disconnect reference from previous element, so that new last element is hook up correctly\r\n            if (observer.current) {\r\n                observer.current.disconnect();\r\n            }\r\n\r\n            // Observe changes in the intersection of target element\r\n            observer.current = new IntersectionObserver(async entries => {\r\n                // That means that we are on the page somewhere, In our case last element of the page\r\n                if (entries[0].isIntersecting && posts.next) {\r\n                    // Proceed fetch new page\r\n                    setIsLoading(true);\r\n                    setPage(++page);\r\n                    await dispatch(fetchPosts({ page }));\r\n                    setIsLoading(false);\r\n                }\r\n            });\r\n\r\n            // Reconnect back with the new last post element\r\n            if (node) {\r\n                observer.current.observe(node);\r\n            }\r\n        },\r\n        // eslint-disable-next-line\r\n        [posts.next]\r\n    );\r\n\r\n    return (\r\n        <section className=\"content\">\r\n            <PostForm />\r\n            <section className=\"posts\">\r\n                {posts.results.length > 0 ? (\r\n                    <ul>\r\n                        {posts.results.map((post, index) => {\r\n                            return (\r\n                                <Post\r\n                                    ref={index === posts.results.length - 1 ? lastPostElement : null}\r\n                                    key={post.id}\r\n                                    post={post}\r\n                                />\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                ) : (\r\n                    <div className=\"no-post\">\r\n                        <img width=\"72\" src={postImage} alt=\"icon\" />\r\n                        <p>No posts here yet...</p>\r\n                    </div>\r\n                )}\r\n                {isLoading && (\r\n                    <div className=\"loading\">\r\n                        <img src={Loading} className=\"\" alt=\"\" />\r\n                    </div>\r\n                )}\r\n            </section>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,MAAxC,EAAgDC,QAAhD,QAAgE,OAAhE;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,QAAT,QAAyB,4BAAzB;;;AAEA,MAAMC,IAAI,GAAG,MAAM;EAAA;;EACf,MAAMC,QAAQ,GAAGT,WAAW,EAA5B;EACA,MAAMU,QAAQ,GAAGT,WAAW,CAACU,KAAK,IAAIA,KAAV,CAA5B;EACA,MAAMC,KAAK,GAAGL,QAAQ,CAACG,QAAD,CAAtB;EACA,IAAI,CAACG,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC,CAAD,CAA9B;EACA,MAAM,CAACgB,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,KAAD,CAA1C;EAEAF,SAAS,CAAC,MAAM;IACZY,QAAQ,CAACH,UAAU,CAAC;MAAEO;IAAF,CAAD,CAAX,CAAR,CADY,CAEZ;EACH,CAHQ,EAGN,EAHM,CAAT,CAPe,CAYf;;EACA,MAAMI,QAAQ,GAAGnB,MAAM,EAAvB,CAbe,CAef;;EACA,MAAMoB,eAAe,GAAGtB,WAAW,CAC/BuB,IAAI,IAAI;IACJ,IAAIJ,SAAJ,EAAe,OADX,CAEJ;;IACA,IAAIE,QAAQ,CAACG,OAAb,EAAsB;MAClBH,QAAQ,CAACG,OAAT,CAAiBC,UAAjB;IACH,CALG,CAOJ;;;IACAJ,QAAQ,CAACG,OAAT,GAAmB,IAAIE,oBAAJ,CAAyB,MAAMC,OAAN,IAAiB;MACzD;MACA,IAAIA,OAAO,CAAC,CAAD,CAAP,CAAWC,cAAX,IAA6BZ,KAAK,CAACa,IAAvC,EAA6C;QACzC;QACAT,YAAY,CAAC,IAAD,CAAZ;QACAF,OAAO,CAAC,EAAED,IAAH,CAAP;QACA,MAAMJ,QAAQ,CAACH,UAAU,CAAC;UAAEO;QAAF,CAAD,CAAX,CAAd;QACAG,YAAY,CAAC,KAAD,CAAZ;MACH;IACJ,CATkB,CAAnB,CARI,CAmBJ;;IACA,IAAIG,IAAJ,EAAU;MACNF,QAAQ,CAACG,OAAT,CAAiBM,OAAjB,CAAyBP,IAAzB;IACH;EACJ,CAxB8B,EAyB/B;EACA,CAACP,KAAK,CAACa,IAAP,CA1B+B,CAAnC;EA6BA,oBACI;IAAS,SAAS,EAAC,SAAnB;IAAA,wBACI,QAAC,QAAD;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI;MAAS,SAAS,EAAC,OAAnB;MAAA,WACKb,KAAK,CAACe,OAAN,CAAcC,MAAd,GAAuB,CAAvB,gBACG;QAAA,UACKhB,KAAK,CAACe,OAAN,CAAcE,GAAd,CAAkB,CAACC,IAAD,EAAOC,KAAP,KAAiB;UAChC,oBACI,QAAC,IAAD;YACI,GAAG,EAAEA,KAAK,KAAKnB,KAAK,CAACe,OAAN,CAAcC,MAAd,GAAuB,CAAjC,GAAqCV,eAArC,GAAuD,IADhE;YAGI,IAAI,EAAEY;UAHV,GAESA,IAAI,CAACE,EAFd;YAAA;YAAA;YAAA;UAAA,QADJ;QAOH,CARA;MADL;QAAA;QAAA;QAAA;MAAA,QADH,gBAaG;QAAK,SAAS,EAAC,SAAf;QAAA,wBACI;UAAK,KAAK,EAAC,IAAX;UAAgB,GAAG,EAAE7B,SAArB;UAAgC,GAAG,EAAC;QAApC;UAAA;UAAA;UAAA;QAAA,QADJ,eAEI;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFJ;MAAA;QAAA;QAAA;QAAA;MAAA,QAdR,EAmBKY,SAAS,iBACN;QAAK,SAAS,EAAC,SAAf;QAAA,uBACI;UAAK,GAAG,EAAEb,OAAV;UAAmB,SAAS,EAAC,EAA7B;UAAgC,GAAG,EAAC;QAApC;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QApBR;IAAA;MAAA;MAAA;MAAA;IAAA,QAFJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AA8BH,CA3ED;;GAAMM,I;UACeR,W,EACAC,W;;;KAFfO,I;AA6EN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}